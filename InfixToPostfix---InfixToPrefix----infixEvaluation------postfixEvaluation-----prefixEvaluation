#include<bits/stdc++.h>
#include<math.h>
#include<stack>
using namespace std;
/*
Note : There only differences between postfix and prefix Evaluation that is the loop 
     1.In prefix loop will start from size-1  to zero
     2.In postfix loop will start from 0 to size-1;
*/


//infix Evaluation
int infixEvaluation(string s){
    //first convert into postfix
    //solve for postfix
}

//prefix Evaluation
int prefixEvaluation(string s){
	stack<int> st;
	for(int i=s.length()-1;i>=0;i--){
		if(s[i]>='0' && s[i]<='9'){
			st.push(s[i]-'0');
		}
		else{
			int op1=st.top();
			st.pop();
			int op2=st.top();
			st.pop();
			switch(s[i]){
				case '+':
					st.push(op1+op2);
					break;
				case '*':
					st.push(op1*op2);
					break;
				case '-':
					st.push(op1-op2);
					break;
				case '/':
					st.push(op1/op2);
					break;
				case '^':
					st.push(pow(op1,op2));																						
					break;
			}
		}
	}
	return st.top();
}

//postfix Evaluation
int postfixEvaluation(string s){
stack<int> st;
for(int i=0;i<s.length();i++){
	if(s[i]>='0' && s[i]<='9'){
	   st.push(s[i]-'0');
	}
	else{
		int op2=st.top();
		st.pop();
		int op1=st.top();
		st.pop();
        switch(s[i]){
			case '+':
				st.push(op1+op2);
				break;
			case '*':
				st.push(op1*op2);
				break;
			case '-':
				st.push(op1-op2);
				break;
			case '/':
				st.push(op1/op2);
				break;
			case '^':
				st.push(pow(op1,op2));																						
				break;
    	   }
       }
   }
   return st.top();
}
int prec(char c){
	if(c=='^'){
		return 3;
	}
	else if(c=='*'||c=='/'){
		return 2;
	}
	else if(c=='+'||c=='-'){
		return 1;
	}
	else{
		return -1;
	}
}
void infix_to_postfix(string s){
	stack<char> st;
    string res;
	for(int i=0;i<s.length();i++){
		if(s[i]>='a'&&s[i]<='z'){
			res+=s[i];
		}
		else if(s[i]=='('){
			st.push(s[i]);	
		}
		else if(s[i]==')'){
			while(!st.empty() && st.top()!='('){
       		res+=st.top();
			st.pop();
			}
			if(!st.empty()){
				st.pop();
			}
		}
		else{
			while(!st.empty() && prec(st.top())>prec(s[i])){
				res+=st.top();
				st.pop();
			}
			st.push(s[i]);
		}
	}
	while(!st.empty()){
		res+=st.top();
		st.pop();
	}	
	cout<<res;
	
}

void infix_to_prefix(string s){
    //reverse string
    //apply infix_to_postfix(string s)
    //reverse again
}
